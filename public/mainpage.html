<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>B99 Case Board</title>

<style>
body {
  margin: 0;
  background: rgb(0, 0, 0);    /* change background */
  background-size: cover;
  background-position: center;
  font-family: "Courier New", monospace;
  overflow: auto;
}

/* BOARD */
#board {
  position: relative;
  max-width: 1200px;        
  height: 900px;            
  margin: 30px auto;
}

/* CENTER LOGO FILE */
.center {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 300px;
  height: 180px;
  transform: translate(-50%, -50%) rotate(-2deg);
  background: #fdf5d4;
  box-shadow: 8px 8px 18px rgba(0,0,0,.8);
  cursor: pointer;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
}

.center img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* SUSPECT CARDS */
.suspect {
  position: absolute;
  width: 150px;
  background: #fff;
  padding: 8px;
  border: 2px solid #000;
  box-shadow: 6px 6px 12px rgba(0,0,0,.7);
  cursor: pointer;
  transition: transform .25s, box-shadow .25s;
  z-index: 5;
}

.suspect img {
  width: 100%;
  height: auto;       
  max-height: 130px;
  object-fit: cover;
  filter: grayscale(30%);
  display: block;
}

.suspect span {
  display: block;
  text-align: center;
  margin-top: 6px;
  font-size: 13px;
  font-weight: bold;
}

.suspect:hover {
  transform: scale(1.1) rotate(1deg);
  box-shadow: 0 0 20px darkred;
  z-index: 20;
}

/* RANDOM ROTATIONS */
.r1 { transform: rotate(-4deg); }
.r2 { transform: rotate(3deg); }
.r3 { transform: rotate(-2deg); }
.r4 { transform: rotate(5deg); }

/* STRINGS */
svg {
  position: absolute;
  inset: 0;
  pointer-events: auto; /* allow pointer events on SVG */
  z-index: 2;
}

/* STRINGS */
path {
  stroke: darkred;
  stroke-width: 3;
  fill: none;
  stroke-dasharray: 0;
  opacity: 0.75;
  pointer-events: stroke; /* let hover target the line stroke */
  cursor: pointer;
}

/* highlight enlarges stroke on hover */
path.highlight {
  stroke-width: 5;
  opacity: 1;
}

/* special relationship lines (different color) */
path.special {
  stroke: red;          /* yellow/gold color for special links */
  stroke-dasharray: 7 2;   /* solid line for emphasis */
  opacity: 10;
}

/* Tooltip for relationships */
#tooltip {
  position: absolute;
  background: rgba(0,0,0,0.85);
  color: #fff;
  padding: 6px 8px;
  border-radius: 6px;
  font-size: 13px;
  pointer-events: none;
  transform: translate(-50%,-120%);
  white-space: nowrap;
  z-index: 30;
  display: none;
}
</style>
</head>

<body>

<div id="board">
  <svg id="strings"></svg>
  <div id="tooltip"></div>

<!-- CENTER LOGO -->
<div class="center" onclick="location.href='b99-archive.html'">
  <!-- YOU WILL REPLACE THIS IMAGE -->
  <img src="../assets/download.jpeg" alt="Brooklyn 99">
</div>

<!-- SUSPECTS (fixed pixel positions relative to the 1200x900 board) -->
<div class="suspect r1" style="left: 60px; top: 72px;" data-id="jake" data-link="jake.html">
  <img src="https://static.wixstatic.com/media/b88cd2_5e6570cf9ddd4bed8abb88a35581e70c~mv2.jpg">
  <span>Jake Peralta</span>
</div>

<div class="suspect r2" style="left: 980px; top: 48px;" data-id="amy" data-link="amy.html">
  <img src="https://static.wikia.nocookie.net/brooklynnine-nine/images/7/78/S7_Melissa_Fumero_-_Amy_Santiago.png">
  <span>Amy Santiago</span>
</div>

<div class="suspect r3" style="left: 60px; top: 360px;" data-id="holt" data-link="holt.html">
  <img src="../assets/rayholt.webp"><span>Captain Holt</span>
</div>

<div class="suspect r4" style="left: 160px; top: 600px;" data-id="rosa" data-link="rosa.html">
  <img src="https://i.pinimg.com/originals/34/55/7b/34557b655283d946d3d51b55894423f9.png"><span>Rosa Diaz</span>
</div>

<div class="suspect r2" style="left: 520px; top: 645px;" data-id="terry" data-link="terry.html">
  <img src="https://static.wikia.nocookie.net/brooklynnine-nine/images/1/16/S7_Terry_Crews_-_Terry_Jeffords.png"><span>Terry Jeffords</span>
</div>

<div class="suspect r1" style="left: 830px; top: 600px;" data-id="gina" data-link="gina.html">
  <img src="https://static.wikia.nocookie.net/brooklynnine-nine/images/b/bb/S1_Gina_Portrait.jpg"><span>Gina Linetti</span>
</div>

<div class="suspect r3" style="left: 1020px; top: 360px;" data-id="charles" data-link="charles.html">
  <img src="https://static.wikia.nocookie.net/brooklynnine-nine/images/f/f3/S7_Joe_Lo_Truglio_-_Charles_Boyle.png"><span>Charles Boyle</span>
</div>

<div class="suspect r4" style="left: 300px; top: 220px;" data-id="hitchcock" data-link="hitchcock.html">
  <img src="https://static.wikia.nocookie.net/brooklynnine-nine/images/a/a5/S7_Dirk_Blocker_-_Michael_Hitchcock.png">
  <span>Hitchcock</span>
</div>

<div class="suspect r2" style="left: 800px; top: 220px;" data-id="scully" data-link="scully.html">
  <img src="https://static.wikia.nocookie.net/brooklynnine-nine/images/c/c4/S7_Joel_McKinnon_Miller_-_Norm_Scully.png">
  <span>Scully</span>
</div>

</div>

<script>
const board = document.getElementById("board");
const svg = document.getElementById("strings");
const tooltip = document.getElementById("tooltip");
const suspects = document.querySelectorAll(".suspect");
const center = document.querySelector(".center");

const specialLinks = [
  ["jake","amy"],
  ["jake","charles"],
  ["jake","holt"],
  ["hitchcock","scully"]
];

const linkStatuses = {
  "jake-amy": "Partners",
  "amy-jake": "Partners",
  "jake-charles": "Best Friends",
  "charles-jake": "Best Friends",
  "jake-holt": "Son / Father-Figure",
  "holt-jake": "Father-Figure / Son",
  "hitchcock-scully": "Old Partners & Best Friends",
  "scully-hitchcock": "Old Partners & Best Friends"
};

function centerOf(el, boardRect) {
  const r = el.getBoundingClientRect();
  // return coords relative to the board's top-left (so they map to SVG space)
  return [r.left + r.width/2 - boardRect.left, r.top + r.height/2 - boardRect.top];
}

function rectsIntersect(a, b) {
  return !(a.left + a.width < b.left ||
           a.left > b.left + b.width ||
           a.top + a.height < b.top ||
           a.top > b.top + b.height);
}

draw();

// remove the resize redraw so positions remain fixed (if you still want redraw on resize re-add listener)
window.removeEventListener('resize', draw);

function drawCurve(x1,y1,x2,y2,highlight=false,status="") {
  const path = document.createElementNS("http://www.w3.org/2000/svg","path");
  const mx = (x1+x2)/2;
  const my = (y1+y2)/2 - 80;
  path.setAttribute("d", `M ${x1} ${y1} Q ${mx} ${my} ${x2} ${y2}`);

  if (highlight) {
    path.classList.add("highlight","special"); // mark special lines so they are yellow
  }
  if (status) path.dataset.status = status;

  // show tooltip on hover
  path.addEventListener('mouseenter', (e) => {
    path.classList.add('highlight');
    tooltip.textContent = path.dataset.status || "Relationship";
    tooltip.style.display = 'block';
  });
  path.addEventListener('mousemove', (e) => {
    // place tooltip relative to board
    const br = board.getBoundingClientRect();
    tooltip.style.left = (e.clientX - br.left) + 'px';
    tooltip.style.top = (e.clientY - br.top) + 'px';
  });
  path.addEventListener('mouseleave', () => {
    // keep special lines styled but remove temporary hover highlight
    if (!path.classList.contains('special')) {
      path.classList.remove('highlight');
    } else {
      // ensure special retains its special class but remove extra highlight state
      path.classList.remove('highlight');
    }
    tooltip.style.display = 'none';
  });

  svg.appendChild(path);
}
suspects.forEach(s => {
  s.onclick = () => location.href = s.dataset.link;
});


function draw() {
  svg.innerHTML = "";
  const rect = board.getBoundingClientRect();
  svg.setAttribute("width", rect.width);
  svg.setAttribute("height", rect.height);

  const [cx, cy] = centerOf(center, rect);

  suspects.forEach(s => {
    const [x, y] = centerOf(s, rect);
    const nameEl = s.querySelector('span');
    const name = nameEl ? nameEl.textContent.trim() : (s.dataset.id || '');
    drawCurve(x, y, cx, cy, false, name);
  });

  // special relationships between two suspects
  specialLinks.forEach(([a, b]) => {
    const sa = document.querySelector(`[data-id="${a}"]`);
    const sb = document.querySelector(`[data-id="${b}"]`);
    if (!sa || !sb) return;
    const [x1, y1] = centerOf(sa, rect);
    const [x2, y2] = centerOf(sb, rect);
    const status = linkStatuses[`${a}-${b}`] || `${a} â€” ${b}`;
    drawCurve(x1, y1, x2, y2, true, status);
  });
}
draw();
window.addEventListener('resize', draw);
</script>

</body>
</html>